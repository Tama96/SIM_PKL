{% extends "base_staf.html" %}
{% load static %}

{% block content %}
<div class="container-fluid">
  <h1 class="mt-4 mb-4" style="text-align: center;">Pendaftaran PKL</h1>
  <div class="card-body">
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-lg btn-primary mb-4 rounded-pill" data-toggle="modal" data-target="#input">
      <span><span>&#43;</span> I N P U T</span>
    </button>

    <div class="table-responsive">
      <table class="table table-hover" id="dataTable" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nama Dosen</th>
            <th scope="col">NIP</th>
            <th scope="col">Prodi</th>
            <th scope="col">Fakultas</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tr>
          {% for d in data %}
        </tr>
        <tr>
          <td>{{forloop.counter}}</td>
          <td>{{d.nama_dosen}}</td>
          <td>{{d.nip}}</td>
          <td>{{d.kelompok}}</td>
          <td>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#detail-{{d.id}}">
              <i class="fas fa-eye"></i></button>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#update-{{d.id}}">
              <i class="fas fa-pen"></i></button>
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delete-{{d.id}}">
              <i class="fas fa-trash-alt"></i></i></button>
          </td>
        </tr>

        <!-- Modal Delete -->
        <div class="modal fade" id="delete-{{d.id}}" tabindex="-1" role="dialog"
          aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="delete">Delete Data LAB-SOS</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="modal-body">
                  <p> Do You want To delete
                    <strong>{{d.id}}</strong>?</p>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btn" type="button" data-dismiss="modal" aria-label="Close">
                  No
                </button>
                <a href="/dosen/{{d.id}}/delete" type="submit" class="btn btn-danger">Yes</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal update -->
        <div class="modal fade" id="update-{{d.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="update">Edit Data</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form action="/dosen/{{d.id}}/update/" method="POST" class="mt-3">
                  {% csrf_token %}

                  <div class="form-group">
                    <label for="">Nama Dosen</label>
                    <input type="text" name="nama_dosen" value="{{d.nama_dosen}}" class="form-control mt-2">
                  </div>
                  <div class="form-group">
                    <label for="">NIP</label>
                    <input type="text" name="nip" value="{{d.nip}}" class="form-control mt-2">
                  </div>
                  <div class="form-group">
                    <label for="">Kelompok</label>
                    <input type="text" name="kelompok" value="{{d.kelompok}}" class="form-control mt-2">
                  </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </div>
            </form>
          </div>
        </div>

        <!-- Modal Detail-->
        <div class="modal fade" id="detail-{{d.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="detail">Detail Data</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="">
                  Nama Dosen : {{d.nama_dosen}}
                </div>
                <div class="">
                  NIP : {{d.nip}}
                </div>
                <div class="">
                  Kelompok : {{d.kelompok}}
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </table>



      <!-- Modal input -->
      <div class="modal fade" id="input" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="input">Input Data PKL</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button> 
            </div>
            <div class="modal-body">
              <form action="" method="post" class="mt-3" enctype="multipart/form-data">
                {% load crispy_forms_tags %}
                {% csrf_token %}
                {{ form|crispy }}
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Input</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

{% endblock %}

{% block script %}
{% endblock %}
